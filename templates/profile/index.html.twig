{% extends 'base.html.twig' %}

{% block styleCustom %}
	<style>
		select {
			display: block !important;
		}

		.tp-caption.boxshadow,
		.boxshadow {
			box-shadow: none !important;
		}
	</style>
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script>
		document.addEventListener('DOMContentLoaded', function () {
  

			const profilPictureInput = document.getElementById('candidate_profilPictureFile');
			const profilPicturePathInput = document.getElementById('file-path-photo');
			const existingProfilPictureFile = document.getElementById('existing-file-photo');

			profilPictureInput.addEventListener('change', function () {
				if (profilPictureInput.files.length > 0) {
					profilPicturePathInput.value = profilPictureInput.files[0].name;
					if (existingProfilPictureFile) {
						existingProfilPictureFile.style.display = 'none';
					}
				}
			});

			const passportInput = document.getElementById('candidate_passportFile');
			const passportPathInput = document.getElementById('file-path-passport');
			const existingPassportFile = document.getElementById('existing-file-passport');

			passportInput.addEventListener('change', function () {
				if (passportInput.files.length > 0) {
					passportPathInput.value = passportInput.files[0].name;
					if (existingPassportFile) {
						existingPassportFile.style.display = 'none';
					}
				}
			});

			const cvInput = document.getElementById('candidate_cvFile');
			const cvPathInput = document.getElementById('file-path-cv');
			const existingCvFile = document.getElementById('existing-file-cv');

			cvInput.addEventListener('change', function () {
				if (cvInput.files.length > 0) {
					cvPathInput.value = cvInput.files[0].name;
					if (existingCvFile) {
						existingCvFile.style.display = 'none';
					}
				}
			});
		});
	</script>
{% endblock %}


{% block body %}
	<!-- Page Header-->
	<section class="page-title page-title-bg fixed-bg overlay dark-5 padding-top-160 padding-bottom-80">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<h2 class="white-text">Your profile</h2>
					<span class="white-text">Personnal & Professionnal informations</span>
					<ol class="breadcrumb">
						<li>
							<a href="{{ path('app_home') }}">Home</a>
						</li>
						<li class="active">Profile</li>
					</ol>
				</div>
			</div>
		</div>
	</section>


	<!-- Page Content-->
	<section class="gray-bg">
		<div class="container">
			<div class="row">
				<div class="score-container">
					<h4 id="profile-completion" class="{% if candidate.completionPercentage != 100 %}hidden{% endif %}">
						<img src="{{ asset('img/s9bPVaK.gif') }}" style="height: 80px; width: 201px;">
						&nbsp;
						Hooray ! Your profile is complete.
					</h4>
					<div class="c100 p{{ candidate.completionPercentage }} small {% if candidate.completionPercentage < 50 %}red{% elseif candidate.completionPercentage < 100 %}orange{% else %}complete{% endif %}">
						<span>{{ candidate.completionPercentage }}%</span>
						<div class="slice">
							<div class="bar"></div>
							<div class="fill"></div>
						</div>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
		</div>
	</section>

	{{ form_start(form, {
		'attr': {
			'id': 'candidateForm',
			'role': 'form',
			'data-parsley-validate': '',
			'enctype': 'multipart/form-data'
		}
	}) }}
	<section class="section-padding">
		<div class="container">
			<div class="row">
				<h3 class="text-extrabold">Your personal informations</h3>


				{# Gender #}
				<div class="col-xs-12 col-sm-6 col-md-4">
					<div class="input-field">
						{{ form_widget(form.gender) }}
						{{ form_label(form.gender) }}
						{{ form_errors(form.gender) }}
					</div>
				</div>

				<div class="clearfix visible-sm"></div>

				{# Firstname #}
				<div class="col-xs-12 col-sm-6 col-md-4">
					<div class="input-field">
						{{ form_widget(form.firstName) }}
						<label for="{{ form.firstName.vars.id }}" class="{% if form.firstName.vars.value %}active{% endif %}">{{ form.firstName.vars.label }}</label>
						{{ form_errors(form.firstName) }}
					</div>
				</div>

				{# LastName #}
				<div class="col-xs-12 col-sm-6 col-md-4">
					<div class="input-field">
						{{ form_widget(form.lastName) }}
						<label for="{{ form.lastName.vars.id }}" class="{% if form.lastName.vars.value %}active{% endif %}">{{ form.lastName.vars.label }}</label>
						{{ form_errors(form.lastName) }}
					</div>
				</div>

				{# Current location #}
				<div class="col-xs-12 col-sm-6 col-md-4">
					<div class="input-field">
						{{ form_widget(form.currentLocation) }}
						<label for="{{ form.currentLocation.vars.id }}" class="{% if form.currentLocation.vars.value %}active{% endif %}">{{ form.currentLocation.vars.label }}</label>
						{{ form_errors(form.currentLocation) }}
					</div>
				</div>

				{# Address #}
				<div class="col-xs-12 col-sm-8">
					<div class="input-field">
						{{ form_widget(form.address) }}
						<label for="{{ form.address.vars.id }}" class="{% if form.address.vars.value %}active{% endif %}">{{ form.address.vars.label }}</label>
						{{ form_errors(form.address) }}
					</div>
				</div>
			</div>
			<div
				class="row">

				{# Profil Pic #}
				<div class="col-xs-12 col-sm-6 col-md-4">
					<div class="file-field input-field" style="margin-top: 32px;">
						<div class="btn btn-lg primary waves-effect waves-light">
							<span>
								<i class="material-icons">insert_photo</i>
								Photo</span>
							{{ form_widget(form.profilPictureFile) }}

						</div>

						{% if candidate.profilePicture %}
							<div id="existing-file-photo" class="existing-file">
								<a href="{{ asset('uploads/profile-pictures/' ~ candidate.profilePicture) }}" target="_blank">
									<i class="material-icons">&#xE24D;</i>
									{{ originalProfilPicture }}
								</a>
							</div>
						{% endif %}
						<div class="file-path-wrapper">
							<input id="file-path-photo" class="file-path validate" type="text" placeholder="Upload your ID photo" readonly>
						</div>
					</div>
				</div>

				<div class="col-xs-12 col-sm-6 col-md-8">
					<div
						class="row">

						{# Country #}
						<div class="col-xs-12 col-sm-6">
							<div class="input-field">
								{{ form_widget(form.country) }}
								<label for="{{ form.country.vars.id }}" class="{% if form.country.vars.value %}active{% endif %}">{{ form.country.vars.label }}</label>
								{{ form_errors(form.country) }}
							</div>
						</div>

						{# Nationality #}
						<div class="col-xs-12 col-sm-6">
							<div class="input-field">
								{{ form_widget(form.nationality) }}
								<label for="{{ form.nationality.vars.id }}" class="{% if form.nationality.vars.value %}active{% endif %}">{{ form.nationality.vars.label }}</label>
								{{ form_errors(form.nationality) }}
							</div>
						</div>

						{# Birthdate #}
						<div class="col-xs-12 col-sm-6">
							<div class="input-field">
								{{ form_widget(form.birthDate) }}
								{{ form_label(form.birthDate) }}
								{{ form_errors(form.birthDate) }}
							</div>
						</div>

						{# Birthplace #}
						<div class="col-xs-12 col-sm-6">
							<div class="input-field">
								{{ form_widget(form.birthPlace) }}
								<label for="{{ form.birthPlace.vars.id }}" class="{% if form.birthPlace.vars.value %}active{% endif %}">{{ form.birthPlace.vars.label }}</label>
								{{ form_errors(form.birthPlace) }}
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="row mt-40">
				<h3 class="text-extrabold">Your professional profile</h3>
				<div class="col-xs-12 col-sm-6">

					<div
						class="card card-panel passport">

						{# Passport #}
						<div class="file-field input-field">
							<div class="btn btn-lg primary waves-effect waves-light">
								<span>
									<i class="material-icons">&#xE24D;</i>
									Passport
								</span>
								{{ form_widget(form.passportFile) }}
							</div>

							{% if candidate.passport %}
								<div id="existing-file-passport" class="existing-file">
									<a href="{{ asset('uploads/passport/' ~ candidate.passport) }}" target="_blank">
										<i class="material-icons">&#xE24D;</i>
										{{ originalPassport }}
									</a>
								</div>
							{% endif %}

							<div class="file-path-wrapper">
								<input id="file-path-passport" class="file-path validate" type="text" placeholder="Upload your passport" readonly>
							</div>
						</div>

						{# CV #}
						<div class="file-field input-field">
							<div class="btn btn-lg primary waves-effect waves-light">
								<span>
									<i class="material-icons">&#xE24D;</i>
									CV
								</span>
								{{ form_widget(form.cvFile) }}
							</div>

							{% if candidate.cv %}
								<div id="existing-file-cv" class="existing-file">
									<a href="{{ asset('uploads/curriculum-vitae/' ~ candidate.cv) }}" target="_blank">
										<i class="material-icons">&#xE24D;</i>
										{{ originalCv }}
									</a>
								</div>
							{% endif %}

							<div class="file-path-wrapper">
								<input id="file-path-cv" class="file-path validate" type="text" placeholder="Upload your Curriculum Vitae" readonly>
							</div>
						</div>

					</div>
				</div>

				<div
					class="col-xs-12 col-sm-6">

					{# Job Category #}
					<div class="col-xs-12 col-sm-12">
						<div class="input-field" style="margin-top: 5px;">
							{{ form_widget(form.jobCategory) }}
							{{ form_label(form.jobCategory) }}
							{{ form_errors(form.jobCategory) }}
						</div>
					</div>

					{# Experience #}
					<div class="col-xs-12 col-sm-12">
						<div class="input-field">
							{{ form_widget(form.experience) }}
							{{ form_label(form.experience) }}
							{{ form_errors(form.experience) }}
						</div>
					</div>

				</div>

				{# Description #}
				<div class="col-xs-12 col-sm-12">
					<div class="input-field">
						{{ form_widget(form.description) }}
						<label for="{{ form.description.vars.id }}" class="{% if form.description.vars.value %}active{% endif %}">{{ form.description.vars.label }}</label>
						{{ form_errors(form.description) }}
					</div>
				</div>
			</div>
		</div>
	</section>

	<section class="section-padding gray-bg">
		<div class="container">
			<div class="row">
				<h3 class="text-extrabold">Your Luxury Services account</h3>

				{# Email #}
				<div class="col-xs-12 col-sm-4">
					<div class="input-field">
						{{ form_widget(form.email) }}
						{{ form_label(form.email) }}
						{{ form_errors(form.email) }}
					</div>
				</div>

				{# Password Change #}
				<div class="col-xs-12 col-sm-4">
					<div class="input-field">
						{{ form_widget(form.newPassword.first) }}
						{{ form_label(form.newPassword.first) }}
						{{ form_errors(form.newPassword.first) }}
					</div>
				</div>

				{# Confirm Password #}
				<div class="col-xs-12 col-sm-4">
					<div class="input-field">
						{{ form_widget(form.newPassword.second) }}
						{{ form_label(form.newPassword.second) }}
						{{ form_errors(form.newPassword.second) }}
					</div>
				</div>
			</div>

			{# Delete Account #}
			<div class="row">
				<div class="col-xs-12 mt-40 mb-80 delete-account">
					<a href="{{ path('app_profile_delete', {id: app.user.candidate.id}) }}" onclick="return prompt('Please Type \'Delete my account\' to delete your Luxury Services account:') == 'Delete my account'" class="btn btn-block btn-lg waves-effect waves-light">
						<i class="material-icons">&#xE872;</i>Delete my account
					</a>
				</div>
			</div>


			<div class="row">
				<div class="col-xs-12 col-sm-6 col-md-4">
					<a href="{{ path('app_home') }}" class="btn btn-block btn-lg border primary waves-effect waves-light">
						<i class="fa fa-long-arrow-left"></i>
						Back home</a>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-4 col-md-offset-4">
					<button type="submit" class="btn btn-block btn-lg gradient secondary waves-effect waves-light">
						<span>
							<strong>UPDATE</strong>
							NOW</span>
					</button>
				</div>
			</div>

		</div>
	</section>
	{{ form_end(form) }}
{% endblock %}
